# æ›´æ–°æ—¥å¿— (Changelog)

æœ¬æ–‡æ¡£è®°å½• backtrader é¡¹ç›®çš„é‡è¦å˜æ›´ã€‚

---

## [æœªå‘å¸ƒ] - 2024-10-14

### é‡è¦è¯´æ˜ (Important)

#### âš ï¸ ç¡®ä¿ä½¿ç”¨é¡¹ç›®æœ¬åœ°ç‰ˆæœ¬

**é—®é¢˜**ï¼š
å¦‚æœæ‚¨é‡åˆ° `TypeError: 'int' object is not subscriptable` é”™è¯¯ï¼Œä¸”é”™è¯¯å †æ ˆæ˜¾ç¤º `D:\anaconda3\Lib\site-packages\backtrader\...`ï¼Œè¯´æ˜æ‚¨æ­£åœ¨ä½¿ç”¨**pipå®‰è£…çš„æ—§ç‰ˆæœ¬**ï¼Œè€Œéé¡¹ç›®ä¿®å¤åçš„ç‰ˆæœ¬ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼ˆæ¨èæ–¹å¼ï¼‰
pip install -e .

# éªŒè¯å®‰è£…
python -c "import backtrader; print(backtrader.__file__)"
# åº”è¯¥è¾“å‡ºï¼šF:\source_code\backtrader\backtrader\__init__.py
```

**è¯¦ç»†è¯´æ˜**ï¼šå‚è§ [docs/INSTALLATION_GUIDE.md](INSTALLATION_GUIDE.md)

---

### ä¿®å¤ (Fixed)

#### ğŸ› ä¿®å¤ DataTrades Observer åç§°ç±»å‹é”™è¯¯

**é—®é¢˜æè¿°**ï¼š
ä½¿ç”¨å¤§é‡æ•°æ®æºï¼ˆå¦‚ 958 åªå¯è½¬å€ºï¼‰å¹¶å¯ç”¨ `stdstats=True` æ—¶ï¼Œç¨‹åºåœ¨åˆå§‹åŒ– `DataTrades` observer æ—¶å´©æºƒï¼š
```
TypeError: 'int' object is not subscriptable
File "backtrader/observers/trades.py", line 106
File "backtrader/lineseries.py", line 183
```

**æ ¹æœ¬åŸå› **ï¼š
- `DataTrades` observer åŠ¨æ€åˆ›å»º lines æ—¶ï¼Œä½¿ç”¨æ•°æ®æºçš„ `_name` å±æ€§
- ä»£ç å‡è®¾ `_name` æ€»æ˜¯å­—ç¬¦ä¸²ç±»å‹
- ä½†å®é™…ä¸Š `_name` å¯èƒ½æ˜¯æ•´æ•°ã€ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–ç±»å‹
- å½“ `_name` æ˜¯æ•´æ•°æ—¶ï¼Œ`lineseries._derive()` æ–¹æ³•ä¼šå°è¯• `linealias[0]` å¯¼è‡´ TypeError

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åœ¨ç”Ÿæˆ `lnames` æ—¶ï¼Œä½¿ç”¨ `str()` å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²
- å¦‚æœ `_name` ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤åç§° `data{i}`
- ç¡®ä¿ `lnames` å…ƒç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `backtrader/observers/trades.py` (ç¬¬100-102è¡Œ)
  ```python
  # ä¿®å¤å‰ï¼š
  lnames = tuple(x._name for x in _obj.datas)
  
  # ä¿®å¤åï¼š
  lnames = tuple(str(x._name) if x._name else f'data{i}' 
                for i, x in enumerate(_obj.datas))
  ```
- `docs/DATATRADES_FIX.md` - è¯¦ç»†çš„ä¿®å¤è¯´æ˜

**æµ‹è¯•ç»“æœ**ï¼š
- âœ… 10 ä¸ªæ•°æ®æºï¼Œstdstats=True é€šè¿‡
- âœ… 50 ä¸ªæ•°æ®æºï¼Œstdstats=True é€šè¿‡
- âœ… 100 ä¸ªæ•°æ®æºï¼Œstdstats=True é€šè¿‡
- âœ… 958 åªå¯è½¬å€ºç­–ç•¥å¯ä»¥æ­£å¸¸è¿è¡Œ

**å½±å“èŒƒå›´**ï¼š
- ä¿®å¤äº†ä½¿ç”¨å¤§é‡æ•°æ®æºæ—¶çš„å´©æºƒé—®é¢˜
- ä¿®å¤äº†æ•°æ®æºåç§°ä¸ºéå­—ç¬¦ä¸²ç±»å‹æ—¶çš„é”™è¯¯
- å®Œå…¨å‘åå…¼å®¹
- æ‰€æœ‰ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹

**é‡è¦æç¤º**ï¼š
ä¿®æ”¹ä»£ç åéœ€è¦é‡æ–°å®‰è£…ï¼š`pip install -U .`

---

#### ğŸ› ä¿®å¤ ExtendPandasFeed åˆ—ç´¢å¼•é”™è¯¯å¯¼è‡´ stdstats æŠ¥é”™

**é—®é¢˜æè¿°**ï¼š
ä½¿ç”¨æ‰©å±•çš„ `PandasData` æ•°æ®æºæ—¶ï¼Œå½“å¯ç”¨ `stdstats=True`ï¼ˆCerebroçš„é»˜è®¤è®¾ç½®ï¼‰ä¼šå¯¼è‡´ç¨‹åºæŠ¥é”™ï¼š`IndexError: index 9 is out of bounds for axis 0 with size 9`

**å½±å“åœºæ™¯**ï¼š
- ä½¿ç”¨ `ExtendPandasFeed` æ·»åŠ è‡ªå®šä¹‰æ•°æ®å­—æ®µ
- DataFrame ä½¿ç”¨ `set_index('datetime')` å°†æ—¶é—´è®¾ä¸ºç´¢å¼•
- å¯ç”¨ stdstatsï¼ˆé»˜è®¤è®¾ç½®ï¼‰æ—¶ç¨‹åºå´©æºƒ
- ç”¨æˆ·è¢«è¿«ä½¿ç”¨ `stdstats=False` ä½œä¸ºä¸´æ—¶è§£å†³æ–¹æ¡ˆ

**æ ¹æœ¬åŸå› **ï¼š
- DataFrame è°ƒç”¨ `set_index('datetime')` åï¼Œdatetime æˆä¸ºç´¢å¼•ï¼Œå®é™…æ•°æ®åˆ—åªå‰© 9 åˆ—ï¼ˆç´¢å¼• 0-8ï¼‰
- ä½† `ExtendPandasFeed` çš„ params ä¸­ datetime ä»å®šä¹‰ä¸ºåˆ—0ï¼Œå¯¼è‡´åç»­å­—æ®µç´¢å¼•å…¨éƒ¨é”™ä½
- æ‰©å±•å­—æ®µ `convert_premium_rate` çš„ç´¢å¼•9è¶…å‡ºäº†å®é™…åˆ—æ•°èŒƒå›´

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å°† `datetime` å‚æ•°è®¾ä¸º `None`ï¼ˆå› ä¸ºå®ƒæ˜¯ç´¢å¼•è€Œéæ•°æ®åˆ—ï¼‰
- è°ƒæ•´æ‰€æœ‰åˆ—ç´¢å¼•ä» 0 å¼€å§‹é‡æ–°è®¡æ•°ï¼š
  - open: 0, high: 1, low: 2, close: 3, volume: 4
  - pure_bond_value: 5, convert_value: 6
  - pure_bond_premium_rate: 7, convert_premium_rate: 8
- æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜ DataFrame ç»“æ„
- ç§»é™¤å¼ºåˆ¶ `stdstats=False` çš„é™åˆ¶
- `run_test_strategy` å‡½æ•°å¢åŠ  `stdstats` å‚æ•°ï¼ˆé»˜è®¤ Trueï¼‰

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `strategies/0025_å¯è½¬å€ºåŒä½ç­–ç•¥/åŸå§‹ç­–ç•¥å›æµ‹.py`
  - ä¿®å¤ ExtendPandasFeed çš„ params å®šä¹‰
  - æ·»åŠ è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
  - run_test_strategy å¢åŠ  stdstats å‚æ•°
- `docs/EXTENDED_FEED_FIX.md` - è¯¦ç»†çš„ä¿®å¤è¯´æ˜å’Œæœ€ä½³å®è·µ

**æµ‹è¯•ç»“æœ**ï¼š
- âœ… 50 ä¸ªæ•°æ®æºï¼Œstdstats=True/False å‡é€šè¿‡
- âœ… 200 ä¸ªæ•°æ®æºï¼Œstdstats=True/False å‡é€šè¿‡
- âœ… å¯è½¬å€ºç­–ç•¥ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ stdstats=True

**å½±å“èŒƒå›´**ï¼š
- ä»…å½±å“ä½¿ç”¨æ‰©å±• PandasData ä¸” DataFrame ä½¿ç”¨ set_index çš„åœºæ™¯
- æ ‡å‡† OHLCV æ•°æ®æºä¸å—å½±å“
- å®Œå…¨å‘åå…¼å®¹

---

#### ğŸ”§ ä¿®å¤ indicators æ¨¡å— PyCharm è­¦å‘Šé—®é¢˜

**é—®é¢˜æè¿°**ï¼š
åœ¨ PyCharm ä¸­ï¼Œ`backtrader/indicators/` æ–‡ä»¶å¤¹çš„è®¸å¤šæŒ‡æ ‡ç±»æ˜¾ç¤º "Unresolved reference" è­¦å‘Šï¼Œå¦‚ ATRã€RSIã€MACD ç­‰ 50+ ä¸ªæŒ‡æ ‡ã€‚

**æ ¹æœ¬åŸå› **ï¼š
`backtrader/indicators/__init__.py` ä½¿ç”¨ `from .module import *` å¯¼å…¥æ–¹å¼ï¼Œä½†æœªå®šä¹‰ `__all__` å˜é‡ï¼Œå¯¼è‡´ IDE é™æ€åˆ†ææ— æ³•ç¡®å®šå¯¼å‡ºçš„ç±»ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åœ¨ `backtrader/indicators/__init__.py` æœ«å°¾æ·»åŠ æ˜¾å¼çš„ `__all__` å¯¼å‡ºåˆ—è¡¨
- åŒ…å« 118 ä¸ªæŒ‡æ ‡ç±»å’Œåˆ«å
- ä¿æŒå‘åå…¼å®¹ï¼Œä¸å½±å“ç°æœ‰ä»£ç 

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `backtrader/indicators/__init__.py` - æ·»åŠ  `__all__` åˆ—è¡¨ï¼ˆ+122 è¡Œï¼‰

**æµ‹è¯•ç»“æœ**ï¼š
- âœ… æ‰€æœ‰ 68 ä¸ªæŒ‡æ ‡æµ‹è¯•é€šè¿‡
- âœ… å¯¼å…¥åŠŸèƒ½æ­£å¸¸
- âœ… PyCharm æ­£ç¡®è¯†åˆ«æ‰€æœ‰å¯¼å‡ºç±»
- âœ… æ”¯æŒå®Œæ•´çš„ä»£ç è¡¥å…¨å’Œç±»å‹æç¤º

**å¯¼å‡ºçš„æŒ‡æ ‡åŒ…æ‹¬**ï¼š
- è¶‹åŠ¿æŒ‡æ ‡ï¼šSMA, EMA, WMA, DEMA, TEMA, HMA, KAMA, ZLEMA ç­‰
- éœ‡è¡æŒ‡æ ‡ï¼šRSI, MACD, Stochastic, CCI, Williams %R, RMI ç­‰
- æ³¢åŠ¨ç‡æŒ‡æ ‡ï¼šATR, Bollinger Bands, True Range ç­‰
- åŠ¨é‡æŒ‡æ ‡ï¼šMomentum, ROC, TSI, KST ç­‰
- å…¶ä»–æŒ‡æ ‡ï¼šAroon, Ichimoku, PSAR, Vortex, DPO ç­‰

**å½±å“èŒƒå›´**ï¼š
- ä»…å½±å“ IDE ç±»å‹æ£€æŸ¥å’Œä»£ç è¡¥å…¨
- è¿è¡Œæ—¶è¡Œä¸ºå®Œå…¨ä¸å˜
- å®Œå…¨å‘åå…¼å®¹

**æäº¤ä¿¡æ¯**ï¼š
```
commit 32217b0
fix: ä¸ºindicatorsæ¨¡å—æ·»åŠ æ˜¾å¼__all__å¯¼å‡ºåˆ—è¡¨

è§£å†³PyCharmä¸­'Unresolved reference'è­¦å‘Šé—®é¢˜
```

---

### æ–‡æ¡£ (Documentation)

#### ğŸ“š ä¼˜åŒ–é¡¹ç›®æ–‡æ¡£

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `CLAUDE.md` - åŸºäºæºä»£ç æ·±åº¦é˜…è¯»ï¼Œé‡å†™å¼€å‘è€…æ–‡æ¡£
- `README.md` - å®Œå–„åŒè¯­ï¼ˆä¸­è‹±æ–‡ï¼‰ç”¨æˆ·æ–‡æ¡£

**ä¸»è¦æ”¹è¿›**ï¼š
1. **CLAUDE.md ä¼˜åŒ–**ï¼š
   - ä¿®æ­£ä¸å‡†ç¡®çš„æè¿°ï¼ˆç§»é™¤ä¸å­˜åœ¨çš„ Cython ä¼˜åŒ–å’Œå‘é‡åŒ–å›æµ‹æ¡†æ¶ä¿¡æ¯ï¼‰
   - æ·»åŠ å®Œæ•´çš„æ ¸å¿ƒç»„ä»¶è¯´æ˜ï¼ˆCerebroã€Strategyã€Brokersã€Feeds ç­‰ï¼‰
   - è¯¦ç»†çš„ç›®å½•ç»“æ„å’Œæ¶æ„è¯´æ˜
   - 50+ æŠ€æœ¯æŒ‡æ ‡å®Œæ•´åˆ—è¡¨
   - å„ç±»ç»çºªå•†å’Œæ•°æ®æºçš„å…·ä½“è¯´æ˜
   - å¼€å‘æŒ‡å—ã€å¸¸è§é—®é¢˜å’Œæ€§èƒ½ä¼˜åŒ–å»ºè®®

2. **README.md ä¼˜åŒ–**ï¼š
   - å®Œå–„åŒè¯­æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰
   - æ·»åŠ è¯¦ç»†çš„åŠŸèƒ½æ¨¡å—è¯´æ˜
   - æä¾›å¯ç›´æ¥è¿è¡Œçš„å®Œæ•´ä»£ç ç¤ºä¾‹
   - å¤šæ—¶é—´å‘¨æœŸåˆ†æç¤ºä¾‹
   - CCXT åŠ å¯†è´§å¸äº¤æ˜“ç¤ºä¾‹
   - å‚æ•°ä¼˜åŒ–ç¤ºä¾‹
   - èµ„é‡‘è´¹ç‡å›æµ‹è¯´æ˜

**æäº¤ä¿¡æ¯**ï¼š
```
commit 70054be
docs: ä¼˜åŒ–CLAUDE.mdå’ŒREADME.mdæ–‡æ¡£å†…å®¹
```

---

## ç‰ˆæœ¬å†å²

### å½“å‰ç‰ˆæœ¬ï¼š1.9.76.123

**æ”¯æŒçš„ Python ç‰ˆæœ¬**ï¼š
- Python 3.8
- Python 3.9
- Python 3.10
- Python 3.11
- Python 3.12
- Python 3.13

**ä¸»è¦ç‰¹æ€§**ï¼š
- ğŸš€ äº‹ä»¶é©±åŠ¨å›æµ‹å¼•æ“
- ğŸª™ CCXT é›†æˆï¼ˆ100+ åŠ å¯†è´§å¸äº¤æ˜“æ‰€ï¼‰
- ğŸ¦ å¤šå¸‚åœºæ”¯æŒï¼ˆè‚¡ç¥¨ã€æœŸè´§ã€å¤–æ±‡ã€åŠ å¯†è´§å¸ï¼‰
- ğŸ“ˆ 50+ æŠ€æœ¯æŒ‡æ ‡
- ğŸ“Š æ€§èƒ½åˆ†æå™¨ï¼ˆå¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰ï¼‰
- ğŸ¯ çµæ´»çš„è®¢å•ç±»å‹
- ğŸ’¼ ä»“ä½ç®¡ç†ç³»ç»Ÿ

**å·²çŸ¥é—®é¢˜**ï¼š
- æ— 

---

## è´¡çŒ®æŒ‡å—

å¦‚éœ€è´¡çŒ®ä»£ç æˆ–æŠ¥å‘Šé—®é¢˜ï¼Œè¯·å‚é˜…ï¼š
- [CLAUDE.md](../CLAUDE.md) - å¼€å‘è€…æŒ‡å—
- [README.md](../README.md) - é¡¹ç›®æ–‡æ¡£
- [Issue Tracker (Gitee)](https://gitee.com/yunjinqi/backtrader/issues)
- [Issue Tracker (GitHub)](https://github.com/cloudQuant/backtrader/issues)

---

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº GNU General Public License v3.0 å¼€æºã€‚

---

**ç»´æŠ¤è€…**ï¼šcloudQuant (yunjinqi@qq.com)

