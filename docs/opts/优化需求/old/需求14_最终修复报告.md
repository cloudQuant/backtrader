当前状态总结
已修复：datetime.date(1) 在数据末尾会抛出 IndexError（通过检查 array[_idx + ago] == 0.0）
仍有问题：
2019-06-18 和 2025-10-13 未触发调仓（无 buy result）
2019-09-02、2022-07-01、2025-05-06 的 110048、110068、110084 有 buy result 但没有 open symbol
从 master 日志看，2019-05-31 和 2025-09-30（月末）有调仓，2019-06-03 和 2025-10-09（月初）也有调仓。这些日期不满足跨月条件，但 master 版本有调仓。
可能原因：
master 版本在这些日期，datetime.date(1) 返回了有效日期，导致 next_month 不等于 current_month
或者 master 版本在这些日期，datetime.date(1) 返回了无效日期，导致 next_month 被错误计算
需要进一步分析 master 版本在这些日期的行为，确认调仓条件。当前修复已部分生效（datetime.date(1) 会抛出 IndexError），但仍有 5 笔交易缺失。
建议：
检查 master 版本在这些日期的 datetime.date(1) 返回值
检查是否有其他调仓条件（除了 current_month != next_month）
检查 2019-09-02、2022-07-01、2025-05-06 的 110048、110068、110084 为什么有 buy result 但没有 open symbol


�          master  remove_metaprogramming
----------  ------  ----------------------
2019-06-18  1       0                     
2019-09-02  20      19                    
2022-07-01  20      19                    
2025-05-06  20      19                    
2025-10-13  1       0   