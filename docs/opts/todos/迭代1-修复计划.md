# 迭代1: 修复计划

## 修复步骤

### 步骤1: 修改clean_data()函数
- 文件: `tests/strategies/test_02_multi_extend_data.py`
- 位置: 第202行
- 修改: `df.groupby("symbol")` → `df.groupby("symbol", sort=True)`

### 步骤2: 修改get_target_symbol()函数 - 字典遍历
- 位置: 第391行
- 修改: `for asset in self.stock_dict:` → `for asset in sorted(self.stock_dict):`

### 步骤3: 修改get_target_symbol()函数 - rank方法
- 位置: 第408-410行
- 修改: `method="first"` → `method="average"`

### 步骤4: 修改get_target_symbol()函数 - sort_values
- 位置: 第416行
- 修改: 添加`data_name`作为次要排序键

### 步骤5: 运行测试获取新的预期值
- 在修复后运行测试，记录新的统一结果
- 更新断言中的预期值

### 步骤6: 验证
- 在Ubuntu环境运行pytest验证测试通过

## 预期时间
- 预计30分钟内完成所有修复和验证
