### 背景

重构代码之后，这个测试用例失败了，需要修复这个测试用例，分析定位bug在什么地方，然后修复

============================================================
Failed Tests:
============================================================
  FAILED tests/strategies/test_21_the_strategy.py::test_ema_cross_strategy - As...
  FAILED tests/strategies/test_33_btc_sentiment_strategy.py::test_btc_sentiment_strategy
  FAILED tests/strategies/test_29_boll_kdj_strategy.py::test_boll_kdj_strategy
  FAILED tests/strategies/test_30_macd_kdj_strategy.py::test_macd_kdj_strategy
  FAILED tests/strategies/test_36_macd_atr_strategy.py::test_macd_atr_strategy
  FAILED tests/strategies/test_31_bb_adx_strategy.py::test_bb_adx_strategy - As...
  FAILED tests/strategies/test_54_commission_schemes.py::test_commission_schemes
  FAILED tests/strategies/test_81_supertrend_strategy.py::test_supertrend_strategy
  FAILED tests/strategies/test_89_adaptive_supertrend_strategy.py::test_adaptive_supertrend_strategy

### 修复方法建议
1. backtrader/run_test_with_log.py 这个运行这个策略，然后对比master分支上的结果，看看origin分支上的结果究竟差在哪里，然后去定位。
2. 如果必要，可以修改测试用例，增加注释，然后方便在两个分支上进行对比。

### 限制

1. 不允许修改测试用例，尤其是测试用例的期望值。
2. 修改过源代码重新测试的时候，最好pip install -U . 重新安装一下。