### 背景

重构代码之后，这个测试用例失败了，需要修复这个测试用例，分析定位bug在什么地方，然后修复

=============================== short test summary info ================================
FAILED tests/strategies/test_03_two_ma.py::test_two_ma_strategy - AssertionError: Expected bar_num=1424, got 1425
FAILED tests/strategies/test_05_stop_order_strategy.py::test_stop_order_strategy - AssertionError: Expected bar_num=4414, got 4415
FAILED tests/strategies/test_15_fenshi_ma_strategy.py::test_timeline_ma_strategy - AssertionError: Expected buy_count=337, got 3
FAILED tests/strategies/test_16_cb_strategy.py::test_cb_intraday_strategy - AssertionError: Expected sharpe_ratio=0.23032590904888126, got 0.27156584864948274

Results (235.12s (0:03:55)):
     362 passed
       4 failed
         - tests/strategies/test_03_two_ma.py:199 test_two_ma_strategy
         - tests/strategies/test_05_stop_order_strategy.py:232 test_stop_order_strategy
         - tests/strategies/test_15_fenshi_ma_strategy.py:239 test_timeline_ma_strategy
         - tests/strategies/test_16_cb_strategy.py:222 test_cb_intraday_strategy

### 修复方法建议
1. backtrader/run_test_with_log.py 这个运行这个策略，然后对比master分支上的结果，看看origin分支上的结果究竟差在哪里，然后去定位。
2. 如果必要，可以修改测试用例，增加注释，然后方便在两个分支上进行对比。

### 限制

1. 不允许修改测试用例，尤其是测试用例的期望值。
2. 修改过源代码重新测试的时候，最好pip install -U . 重新安装一下。